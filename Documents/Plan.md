# План автоматизации тестирования сервиса покупки туров

## Объект тестирования

Веб-сервис оплаты путешествий:
* оплата банковской картой
* оплата в кредит с выдачей по реквизитам банковской карты

### Валидные данные предоставленных тестовых карт
* Номер разрешённой карты: 4444 4444 4444 4441
* Номер запрещённой карты: 4444 4444 4444 4442
* Месяц: двузначное число в диапазоне от 01 до 12
* Год: следующий за текущим, в формате двузначного числа
* Владелец: Имя и Фамилия латиницей
* CVC: Трёхзначное число в диапазоне 000 до 999


## Перечень автоматизируемых сценариев:
### Сценарии для формы "Оплата по карте"

_**1.1.** Корректная загрузка формы "Оплата по карте"._
* Нажать на вкладку "Купить".

**Ожидаемый результат:** 
* Во вкладке "Купить" появилась форма для заполнения с заголовком "Оплата по карте".

_**1.2.** Обычная оплата по дебетовой карте со статусом "APPROVED" и, введенными в форму, валидными значениями:_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:** 
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки.
* В правом верхнем углу появляется всплывающее окно с сообщением "Операция одобрена Банком".

_**1.3.** Обычная оплата по дебетовой карте со статусом "DECLINED" и, введенными в форму, валидными значениями:_
* В поле "Номер карты" ввести "4444 4444 4444 4442";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки.
* В правом верхнем углу появляется всплывающее окно с сообщением "Ошибка! Банк отказал в проведении операции".

_**1.4.** Отображение в СУБД корректной суммы, при оплате по дебетовой карте со статусом "APPROVED" и, введенными в форму,
валидными значениями:_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки;
* В правом верхнем углу появляется всплывающее окно с сообщением "Операция одобрена Банком";
* В таблице СУБД «payment_entity», в столбце «amount», отображается корректная сумма - '45000'.

_**1.5.** Обычная оплата по дебетовой карте с невалидным номером карты:_
* В поле "Номер карты" ввести "1111 1111 1111 1111";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки;
* В правом верхнем углу появляется всплывающее окно с сообщением "Ошибка! Банк отказал в проведении операции".

_**1.6.** Обычная оплата по дебетовой карте со статусом "APPROVED" и невалидным значением в поле "Месяц":_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "99";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Месяц" появляется сообщение красными буквами "Неверно указан срок действия карты".

_**1.7.** Обычная оплата по дебетовой карте со статусом "APPROVED" и невалидным значением в поле "Год", которое меньше значения текущего года:_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "12";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Год" появляется сообщение красными буквами "Истёк срок действия карты".

_**1.8.** Обычная оплата по дебетовой карте со статусом "APPROVED" и невалидным значением в поле "Владелец":_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на кириллице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Владелец" появляется сообщение «Неверный формат».
* Кнопка "Продолжить" не меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки. Отправка формы не выполняется.

_**1.9.** Отправка пустой формы "Оплата по карте":_
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полями "Номер карты", "Месяц", "Год", "CVC/CVV", появляется сообщение красными буквами "Неверный формат";
* Под полем "Владелец" - "Поле обязательно для заполнения";
* Форма не отправлена.

_**1.10.** Заполнение полей формы "Оплата по карте" валидными значениями после отправки пустой формы:_
* Нажать на кнопку "Продолжить".
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* После нажатия на кнопку "Продолжить", для отправки пустой формы, форма не отправилась;
   * Под полями "Номер карты", "Месяц", "Год", "CVC/CVV", появляется сообщение красными буквами "Неверный формат»
   * Под полем "Владелец" - "Поле обязательно для заполнения».
* После корректного заполнения полей, кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки. 
   * Форма отправлена. В правом верхнем углу появляется всплывающее окно с сообщением "Операция одобрена Банком". 
   * Видимые всплывающие окна.
* Сообщения (красным цветом), о некорректном заполнении всех полей или отсутствии данных в некоторых полях формы, не появляются.

_**1.11.** Заполнение полей формы "Оплата по карте" невалидными значениями:_
* В поле "Номер карты" ввести "1111 1111 1111 1111";
* В поле "Месяц" ввести "99";
* В поле "Год" ввести "32";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на кириллице;
* В поле "CVC/CVV" ввести "12";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полями "Номер карты", "Месяц", "Год", "Владелец", "CVC/CVV", появляется сообщение красными буквами "Неверный формат".

---

### 2. ### Сценарии для формы "Кредит по данным карты"

_**2.1.** Корректная загрузка формы "Кредит по данным карты":_
* Нажать на вкладку "Купить в кредит".

**Ожидаемый результат:**
* Во вкладке "Купить в кредит" появилась форма для заполнения с заголовком "Кредит по данным карты".

_**2.2.** Выдача кредита по данным банковской карты со статусом "APPROVED" и, введенными в форму, валидными значениями:_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки;
* В правом верхнем углу появляется всплывающее окно с сообщением "Операция одобрена Банком".

_**2.3.** Выдача кредита по данным банковской карты со статусом "DECLINED" и, введенными в форму, валидными значениями:_
* В поле "Номер карты" ввести "4444 4444 4444 4442";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* в поле "CVC/CVV" ввести "123";
* нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки;
* В правом верхнем углу появляется всплывающее окно с сообщением "Ошибка! Банк отказал в проведении операции".

_**2.4.** Выдача кредита по данным банковской карты с невалидным номером карты:_
* в поле "Номер карты" ввести "1111 1111 1111 1111";
* в поле "Месяц" ввести "08";
* в поле "Год" ввести "23";
* поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* в поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки.
* В правом верхнем углу появляется всплывающее окно с сообщением "Ошибка! Банк отказал в проведении операции".

_**2.5.** Выдача кредита по данным банковской карты со статусом "APPROVED" и  невалидным значением в поле "Месяц":_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "99";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Месяц" появляется сообщение красными буквами "Неверно указан срок действия карты".

_**2.6.** Выдача кредита по данным банковской карты со статусом "APPROVED" и  невалидным значением в поле "Год", которое меньше значения текущего года:_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "12";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Год" появляется сообщение красными буквами "Истёк срок действия карты".

_**2.7.** Выдача кредита по данным банковской карты со статусом "APPROVED" и  невалидным значением в поле "Год", которое не может быть сроком действия карты:_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "32";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Год" появляется сообщение красными буквами "Неверно указан срок действия карты".

_**2.8.** Выдача кредита по данным банковской карты со статусом "APPROVED" и  невалидным значением в поле "Владелец":_
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на кириллице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полем "Владелец" красными буквами появляется сообщение красными буквами "Неверный формат".

_**2.9.** Отправка пустой формы «Кредит по данным карты»:_
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полями "Номер карты", "Месяц", "Год", "CVC/CVV", появляется сообщение красными буквами "Неверный формат";
* Под полем "Владелец" - "Поле обязательно для заполнения". 
* Форма не отправлена.

_**2.10.** Заполнение полей формы «Кредит по данным карты» валидными значениями после отправки пустой формы:_
* Нажать на кнопку "Продолжить".
* В поле "Номер карты" ввести "4444 4444 4444 4441";
* В поле "Месяц" ввести "08";
* В поле "Год" ввести "23";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на латинице;
* В поле "CVC/CVV" ввести "123";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* После нажатия на кнопку "Продолжить", для отправки пустой формы, форма не отправилась. 
   * Под полями "Номер карты", "Месяц", "Год", "CVC/CVV", появляется сообщение красными буквами "Неверный формат»
   * Под полем "Владелец" - "Поле обязательно для заполнения».
* После корректного заполнения полей, кнопка "Продолжить" меняется на кнопку "Отправляем запрос в Банк..." с крутящимся индикатором загрузки. 
   * Форма отправлена. 
   * В правом верхнем углу появляется всплывающее окно с сообщением "Операция одобрена Банком".
   * Видимые всплывающие окна.
* Сообщения (красным цветом), о некорректном заполнении всех полей или отсутствии данных в некоторых полях формы, не появляются.

_**2.11.** Заполнение полей формы «Кредит по данным карты» невалидными значениями:_
* В поле "Номер карты" ввести "1111 1111 1111 1111";
* В поле "Месяц" ввести "99";
* В поле "Год" ввести "32";
* Поле "Владелец" заполнено с помощью библиотеки генерации данных "Faker" на кириллице;
* В поле "CVC/CVV" ввести "12";
* Нажать на кнопку "Продолжить".

**Ожидаемый результат:**
* Под полями "Номер карты", "Месяц", "Год", "Владелец", "CVC/CVV", появляется сообщение красными буквами "Неверный формат".

-----
### Перечень используемых инструментов с обоснованием выбора
* JDK 11 - Написание кода тестов
* IntelliJ IDEA - Среда подготовки авто-тестов
* Github - Репозиторий для хранения кода
* Docker - для развертываня контейнеров с базой данных (MySQL и PostgreSQL)
* JUnit 5 - позволяет создавать автоматизированные тесты на java
* Selenide - для автоматизации UI тестов на java c простым синтаксисом
* Faker - генератор случайных имён владельца карты
* Lombok - упрощает написание  повторяемого кода на java
* Allure - для создания отчётов тестирования

### Перечень и описание возможных рисков при автоматизации
* Отсутствие документации. Сложно понять, как должно работать приложение и какое поведение системы нужно считать ошибкой
* Отсутствие требований к полям формы оплаты
* Сложный запуск SUT
* Возможны ошибки при написании автотестов;
* Возможны ошибки в автотестах, связанные с техническим сбоем;
* Возможны ошибки в автотестах, в связи с изменением кода;

### Интервальная оценка с учётом рисков (в часах)
    * 10 часов на настройку тестового окружения;
    * 10 часов на исследование приложения;
    * 6 часов на планирование;
    * 48 часов на написание основы тестов и утилит;
    * 48 часов на написание самих тестов;
    * 24 часов отладку тестов;
    * 24 часов на описание багов и отчёт;
    Итого с учетом рисков: 170 часов

### План сдачи работ
* Подготовка тестового окружения, запуск приложения, планирование: 12.12.2022
* Написание автотестов, тестирование: 22.12.2022
* Отладка тестов и описание багов 27.12.2022
* Формирование отчета автоматизации и тестирования: 28.12.2022

