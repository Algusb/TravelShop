# План автоматизации

#### Объект тестирования

Веб-сервис оплаты путешествий:
* оплата банковской картой
* оплата в кредит с выдачей по реквизитам банковской карты

#### Валидные данные предоставленных тестовых карт
* Номер разрешённой карты: 4444 4444 4444 4441
* Номер запрещённой карты: 4444 4444 4444 4442
* Месяц: двузначное число в диапазоне от 01 до 12
* Год: следующий за текущим, в формате двузначного числа
* Владелец: Имя и Фамилия латиницей
* CVC: Трёхзначное число в диапазоне 000 до 999

## Перечень автоматизируемых сценариев

# Купить

1. Купить. Успешная оплата разрешённой картой
    * Выбрать "Купить"
    * Заполнить данные разрешённой карты
    * Нажать "Продолжить"
    * Ожидаемый результат: уведомление "Успешно". В БД статус операции: "APPROVED"

1. Купить. Отказ в оплате запрещённой картой
    * Выбрать "Купить"
    * Заполнить данные запрещённой карты
    * Нажать "Продолжить"
    * Ожидаем: уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить. Отказ в оплате картой не зарегестрированой в системе
    * Выбрать "Купить"
    * Заполнить все поля, кроме номера, валидными данными
    * В поле "Номер карты" ввести: 1111 1111 1111 1111
    * Ожидаем: уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить. Отказ в оплате картой просроченной на месяц
    * Выбрать "Купить"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести прошедший
    * В поле "Год" ввести текущий год
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Сообщение "Неверно указан срок действия карты"

1. Купить. Отказ в оплате картой просроченной на год
    * Выбрать "Купить"
    * Заполнить все поля, кроме года, валидными данными
    * В поле "Год" ввести прошлый год
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Сообщение "Истёк срок действия карты"

1. Купить. Неверный формат полей с информацией о карте
    * Выбрать "Купить"
    * Заполнить все поля, невалидными данными
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Уведомление об ошибках под всеми полями.

1. Купить. Попытка отправки формы с пустыми полями
    * Выбрать "Купить"
    * Оставить все поля пустыми
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Уведомление об ошибках под всеми полями.

# Купить в кредит

1. Купить в кредит. Успешная оплата кредитом с разрешённой картой
    * Выбрать "Купить в кредит"
    * Заполнить данные разрешённой карты
    * Нажать "Продолжить"
    * Ожидаем: уведомление "Успешно". В БД статус операции: "APPROVED"

1. Купить в кредит. Отказ в оплате кредитом с запрещённой картой
    * Выбрать "Купить в кредит"
    * Заполнить данные запрещённой карты
    * Нажать "Продолжить"
    * Ожидаем: уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить в кредит. Отказ в оплате кредитом картой не зарегестрированой в системе
 Карту, номер которой не существует в системе, считаем равной запрещённой карте
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме номера, валидными данными
    * В поле "Номер карты" ввести: 4444 4444 4444 4444
    * Получить уведомление "Отказано". В БД статус операции: "DECLINED"

1. Купить в кредит. Отказ в оплате кредитом картой просроченной на месяц
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести прошедший
    * В поле "Год" ввести текущий год
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Сообщение "Неверно указан срок действия карты"

1. Купить в кредит. Отказ в оплате кредитом картой просроченной на год
    * Выбрать "Купить в кредит"
    * Заполнить все поля, кроме года и месяца, валидными данными
    * В поле "Месяц" ввести текущий
    * В поле "Год" ввести прошедший
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Сообщение "Истёк срок действия карты"

1. Купить в кредит. Неверный формат полей с информацией о карте
    * Выбрать "Купить"
    * Заполнить все поля, невалидными данными
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Уведомление об ошибках под всеми полями.

1. Купить в кредит. Попытка отправки формы с пустыми полями
    * Выбрать "Купить"
    * Оставить все поля пустыми
    * Нажать "Продолжить"
    * Ожидаем: Оплата не происходит. Уведомление об ошибках под всеми полями.



### Перечень используемых инструментов с обоснованием выбора
* JDK 11 - Написание кода тестов
* IntelliJ IDEA - Среда подготовки авто-тестов
* Github - Репозиторий для хранения кода
* Docker - для развертываня контейнеров с базой данных (MySQL и PostgreSQL)
* JUnit 5 - позволяет создавать автоматизированные тесты на java
* Selenide - для автоматизации UI тестов на java c простым синтаксисом
* Faker - генератор случайных имён владельца карты
* Lombok - упрощает написание  повторяемого кода на java
* Allure - для создания отчётов тестирования

### Перечень и описание возможных рисков при автоматизации
* Отсутствие документации. Сложно понять, как должно работать приложение и какое поведение системы нужно считать ошибкой
* Отсутствие требований к полям формы оплаты
* Сложный запуск SUT

### Интервальная оценка с учётом рисков (в часах)
    * 10 часов на настройку тестового окружения;
    * 10 часов на исследование приложения;
    * 6 часов на планирование;
    * 48 часов на написание основы тестов и утилит;
    * 48 часов на написание самих тестов;
    * 24 часов отладку тестов;
    * 24 часов на описание багов и отчёт;
    Итого с учетом рисков: 170 часов

### План сдачи работ
* Подготовка тестового окружения, запуск приложения, планирование: 12.12.2022
* Написание автотестов, тестирование: 22.12.2022
* Отладка тестов и описание багов 27.12.2022
* Формирование отчета автоматизации и тестирования: 28.12.2022

